account:
  resourceMonitor: ACCOUNT_RESOURCE_MONITOR
  # sessionPolicy: GOVERNANCE.POLICIES.ACCOUNT_SESSION_POLICY
  # passwordPolicy: GOVERNANCE.POLICIES.ACCOUNT_PASSWORD_POLICY
  tags:
    GOVERNANCE.TAGS.environment: DEVELOPMENT
  parameters:
    abort_detached_query: true
    allow_client_mfa_caching: true
    allow_id_token: true
    client_enable_log_info_statement_parameters: false
    data_retention_time_in_days: 1
    error_on_nondeterministic_merge: true
    network_policy: ACCOUNT_NETWORK_POLICY
    max_data_extension_time_in_days: 14
    prevent_unload_to_inline_url: true
    require_storage_integration_for_stage_creation: true
    require_storage_integration_for_stage_operation: true
    statement_queued_timeout_in_seconds: 3600 # 1 hour
    statement_timeout_in_seconds: 21600 # 6 hours
    timezone: UTC
    transaction_abort_on_error: true
    periodic_data_rekeying: true

databases:
  - name: GOVERNANCE
schemas:
  - name: POLICIES
    database: GOVERNANCE
  - name: TAGS
    database: GOVERNANCE
privilegeGrants:
  - privilege: all
    objectType: database
    objectName: GOVERNANCE
    roleName: SECURITYADMIN
  - privilege: all
    objectType: schema
    objectName: GOVERNANCE.POLICIES
    roleName: SECURITYADMIN
  - privilege: all
    objectType: schema
    objectName: GOVERNANCE.TAGS
    roleName: SECURITYADMIN

networkPolicies:
  - name: ACCOUNT_NETWORK_POLICY
    allowedIps:
      - 0.0.0.0/0
    properties:
      comment: "The default network policy"

sessionPolicies:
  - database: GOVERNANCE
    schema: POLICIES
    name: ACCOUNT_SESSION_POLICY
    properties:
      session_idle_timeout_mins: 10
      session_ui_idle_timeout_mins: 10
      comment: "The default session policy"

passwordPolicies:
  - database: GOVERNANCE
    schema: POLICIES
    name: ACCOUNT_PASSWORD_POLICY
    properties:
      password_min_length: 12
      password_max_length: 24
      password_min_upper_case_chars: 1
      password_min_lower_case_chars: 1
      password_min_numeric_chars: 1
      password_min_special_chars: 1
      password_max_retries: 5
      password_lockout_time_mins: 30
      comment: "The default password policy"

resourceMonitors:
  - name: ACCOUNT_RESOURCE_MONITOR
    creditQuota: 500
    startTimestamp: IMMEDIATELY
    frequency: MONTHLY
    triggers:
      - threshold: 50
        action: NOTIFY
      - threshold: 75
        action: NOTIFY
      - threshold: 90
        action: NOTIFY

tags:
  - name: environment
    database: GOVERNANCE
    schema: TAGS
    allowedValues:
      - PRODUCTION
      - DEVELOPMENT
      - SANDBOX
    properties:
      comment: An account tag to mark the purpose of an account
